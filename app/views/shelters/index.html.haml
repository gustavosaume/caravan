- content_for :head do
  = javascript_include_tag "shelters"
  = stylesheet_link_tag "shelters"

#shelter-list-filter
#shelter-list-container{data: {shelters: @shelters.map(&:to_hash).to_json}}

%script#template-shelters-filter{type: :ractive}
  %ul.toolbar
    {{#if sortColumn == 'distance'}}
    %li.toolbarItem.filter.sorted{:'on-tap' => 'sort:distance'} Distance
    {{else}}
    %li.toolbarItem.filter{:'on-tap' => 'sort:distance'} Distance
    {{/if}}
    {{#if sortColumn == 'rating'}}
    %li.toolbarItem.filter.sorted{:'on-tap' => 'sort:rating'} Rating
    {{else}}
    %li.toolbarItem.filter{:'on-tap' => 'sort:rating'} Rating
    {{/if}}
    {{#if sortColumn == 'name'}}
    %li.toolbarItem.filter.sorted{:'on-tap' => 'sort:name'} Alphabetical
    {{else}}
    %li.toolbarItem.filter{:'on-tap' => 'sort:name'} Alphabetical
    {{/if}}

%script#template-shelters{type: :ractive}
  %ul#shelter-list.list
    {{#each sort(shelters, sortColumn):i}}
    {{>shelter}}
    {{/each}}

  <!-- {{>shelter}} -->
  %li.shelter-item
    %h1 {{name}}
    %h2.rating {{rating}}
    %h2 {{distance}} miles away
    %p {{description}}
    %a.action-link{href: '/shelters/{{id}}'} More Info
    %a.action-link{href: '/shelters/{{id}}/reserve'} Reserve
  <!-- {{/shelter}} -->

/ %p#notice= notice
/ %h1 Listing Shelters
/ %table
/   %thead
/     %tr
/       %th{:colspan => "3"}
/   %tbody
/     - @shelters.each do |shelter|
/       %tr
/         %td= link_to 'Show', shelter
/         %td= link_to 'Edit', edit_shelter_path(shelter)
/         %td= link_to 'Destroy', shelter, method: :delete, data: { confirm: 'Are you sure?' }
/ %br/
/ = link_to 'New Shelter', new_shelter_path
 